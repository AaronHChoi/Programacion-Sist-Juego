using UnityEngine;

public class InvulnerabilityPowerUp : MonoBehaviour, IPowerUpStrategy
{
    public string Name => "InvulnerabilityPowerUp";

    [SerializeField] private float duration = 8f; 

    public void PowerUp(Simulacro.PlayerMovement player)
    {
        if (player == null) return;

        // Orchestrate effect here (Strategy owns the behavior timing)
        player.StartCoroutine(InvulnerabilityRoutine(player, duration));
    }

    private static System.Collections.IEnumerator InvulnerabilityRoutine(Simulacro.PlayerMovement player, float duration)
    {
        // Enable and provide feedback
        player.SetInvulnerable(true);
        Debug.Log($"Invulnerability active for {duration} seconds");

        yield return new WaitForSeconds(duration);

        // Disable and restore
        player.SetInvulnerable(false);
        Debug.Log("Invulnerability expired - Back to normal");
    }
}